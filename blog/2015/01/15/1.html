<html><head>
    <title>下雪了</title>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width">
    <link rel="shortcut icon" type="image/ico" href="/favicon.ico">
    <style type="text/css" media="screen">
      *{margin:0;padding:0}body{display:-webkit-box;display:-webkit-flex;display:-ms-flexbox;display:flex;-webkit-flex-flow:column;-ms-flex-flow:column;flex-flow:column;color:#000;background:#FFF;font-family:Helvetica,Arial,'Bitstream Vera Sans',sans-serif;text-align:center;font-size:18px;margin:2em auto;width:40em}.search{margin-bottom:30px;display:block}h1,h2,h3,h4,h5{padding-left:0;font-weight:700}h1{padding-top:10px;padding-bottom:5px;font-size:43px;font-weight:700;letter-spacing:.09em;display:-webkit-box;display:-webkit-flex;display:-ms-flexbox;display:flex;-webkit-box-pack:center;-webkit-justify-content:center;-ms-flex-pack:center;justify-content:center;-webkit-align-content:center;-ms-flex-line-pack:center;align-content:center}.logo{width:40px;height:40px;margin:10px}img{border:0 solid #fff;color:#fff;border-width:0}li{margin-bottom:.6em}blockquote,dl,ol,p,pre,table,ul{margin:15px 0}embed,ol,pre,ul{padding-left:2em}a,a:active,a:hover,a:link,a:visited{color:#000}a:hover{color:#707}.commentContent{background-color:#f5f5f5;margin-top:15px;margin-bottom:15px;padding:1em}.content,.item{text-align:left}h2{font-size:30px}dt{font-weight:700;margin:15px 0}dd{padding-left:1em}h3{margin-top:.5em;margin-bottom:.5em;font-size:24px;font-weight:700}h4{margin-top:.5em;font-style:italic}.item form img{margin-left:0}.item .pub{text-align:right;padding:1em;padding-left:1.5em;margin:0;margin-top:.5em}.footer{padding:.5em;border-top:solid #000 1px;-webkit-box-pack:justify;-webkit-justify-content:space-between;-ms-flex-pack:justify;justify-content:space-between;display:-webkit-box;display:-webkit-flex;display:-ms-flexbox;display:flex}.unframed{padding:1em;float:right}.framed{padding:.5em;border:solid #000 3px;margin:1em}ins{background-color:#ff0;text-decoration:none}blockquote p{font-style:italic;text-align:right;padding-right:2em}.diff{background-color:#ff0}pre{font-family:monospace}code{color:green}.help,abbr,acronym{border-bottom:1px dotted #333;cursor:help}input{background-color:#ddd}.tags{padding-left:0;float:left}.tags li{float:right;padding:0;list-style-type:none}.rant{font-weight:700;color:#900}.fisk{margin-left:2em;padding:.5em;background-color:#f0f0f0}form{margin-top:0}.caption{text-align:center;margin-bottom:1em}td,th{padding:.1em .3em}th{background-color:#ddd}.tip{border:solid gray 1px;background-color:#eec;padding-left:1em}.aside{border:solid gray 1px;background-color:#ccc;padding:1em;margin-bottom:.5em;margin-top:.5em}table{border:0 none}.commentByLine{margin-left:0;padding-left:0;text-align:right}.nones{display:none}@media screen and (max-width:700px){h1 a{display:none}h1{display:block}.footer,.nav,.search{-webkit-box-pack:justify;-webkit-justify-content:space-between;-ms-flex-pack:justify;justify-content:space-between;display:-webkit-box;display:-webkit-flex;display:-ms-flexbox;display:flex}.search input{-webkit-box-flex:1;-webkit-flex:1;-ms-flex:1;flex:1}.nav a{font-size:24px}.logo{width:64px;height:64px;display:inline}body{margin:.5em auto;width:95%}.search input,h2{font-size:20px}.footer p{margin:0}}@media print{body{width:95%;margin-left:2%;margin-right:2%}}.pln{color:#000}@media screen{.str{color:#080}.kwd{color:#008}.com{color:#800}.typ{color:#606}.lit{color:#066}.clo,.opn,.pun{color:#660}.tag{color:#008}.atn{color:#606}.atv{color:#080}.dec,.var{color:#606}.fun{color:red}}@media print,projection{.str{color:#060}.kwd{color:#006;font-weight:700}.com{color:#600;font-style:italic}.typ{color:#404;font-weight:700}.lit{color:#044}.clo,.opn,.pun{color:#440}.tag{color:#006;font-weight:700}.atn{color:#404}.atv{color:#060}}pre.prettyprint{padding:2px;border:1px solid #888}ol.linenums{margin-top:0;margin-bottom:0}li.L0,li.L1,li.L2,li.L3,li.L5,li.L6,li.L7,li.L8{list-style-type:none}li.L1,li.L3,li.L5,li.L7,li.L9{background:#eee}
    </style>
  </head>
  <body>
    

    <h1><a href="/">wbjs.org</a></h1>

    <p class="nav">
      <a href="/">Home</a>
      <a href="/about">About</a>
      <a href="/demo">demos</a>
    </p> 
    <div class="item">
    
      <h2>Snow</h2>
      
  <p>
  </p>
  <canvas id="snow" width="300" height="300" style="box-shadow: 2px 2px 5px gray;"></canvas>
	<script>

		window.onload = function(){
			var canvas=document.getElementById("snow");
			var ctx = canvas.getContext("2d");
			var W = canvas.width;
			var H = canvas.height;
			var angle = 0;
			var mp = 10;
			var snowLine = [];
			for (var i = 0; i < W; i++) {
				snowLine[i] = 0;
			};
			var particles =[];
			for (var i = 0; i < mp; i++) {
				particles[i] = {
					x:Math.floor(Math.random()*W),
					y:Math.floor(Math.random()*H),
					r:Math.floor(Math.random()*7+1),

				}
			}
			function draw(){
				angle += 0.0039;

				ctx.fillStyle = "lightblue";
				ctx.fillRect(0,0,W,H);

				ctx.fillStyle = "white";
				ctx.strokeStyle = 'white';
				for (var i = 0; i < particles.length; i++) {
					var p = particles[i];
					p.x += Math.floor(Math.sin(angle)*5.0);

					if (p.x > W) {
						p.x-=W;
					}
					if (p.x < 0) {
						p.x += W;
					}
					var actualX =p.x;
          ctx.beginPath();
          ctx.moveTo(actualX, p.y);
          ctx.arc(actualX, p.y, p.r, 0,2 * Math.PI, false);
          ctx.fill();
					p.y += 0.6*p.r;
					if((p.y+snowLine[actualX])>(H+1)){
						p.y = 0;
						var intX = actualX;
						var d = p.r;
						snowLine[intX]+=d;
						var left = intX-1;
						var right = intX+1;
						for (var j = d; j >= 0; j--) {
							snowLine[left] += j;
						    snowLine[right] += j;
						    left--;
						    right++;
						}
					}
				};

				for (var i = 0; i < W; i++) {
					if (snowLine[i] > 0) {
						ctx.fillRect(i, H-snowLine[i], 1, snowLine[i]);
					}
				}
				for (var i = 0; i < W; i++) {
					var above = i+4;
						if (above>=W){
							above-=W;
						}

					if (snowLine[i] > snowLine[above]+1) {
						snowLine[i]-=1;
						snowLine[above]+=1;
					}
				}
				for (var i = 0; i < W; i++) {
						var below = i-4;
						if (below<0){
							below+=W;
						}
					if (snowLine[i] > snowLine[below]+1) {
						snowLine[i]-=1;
						snowLine[below]+=1;
					}
				}

			}
			setInterval(draw,20);
		}
	</script>




      <p class="pub">2015-01-15</p>
      </div>

    <div class="footer">
      <p class="footercopyright">© 2000-2015 <a href="/">www.wbjs.org</a>
      </p> 
   </div> 
</body></html>